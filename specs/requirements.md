# 要件定義書

## 概要

個人または小規模事業者向けの会計アプリケーション。収入・支出の記録、カテゴリ別の分類、基本的な財務レポートの生成機能を提供し、日々の金銭管理を効率化する。

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、収入と支出を記録したいので、家計や事業の金銭の流れを把握できるようになりたい

#### 受入基準

1. WHEN ユーザーが取引を入力する THEN システムは日付、金額、説明、カテゴリを記録する SHALL
2. WHEN ユーザーが収入取引を作成する THEN システムは金額を正の値として記録する SHALL
3. WHEN ユーザーが支出取引を作成する THEN システムは金額を負の値として記録する SHALL
4. IF 必須項目（日付、金額、カテゴリ）が未入力 THEN システムはエラーメッセージを表示する SHALL

### 要件 2

**ユーザーストーリー:** ユーザーとして、取引をカテゴリ別に分類したいので、支出の内訳を把握し予算管理ができるようになりたい

#### 受入基準

1. WHEN ユーザーがカテゴリを作成する THEN システムはカテゴリ名と色を保存する SHALL
2. WHEN ユーザーが取引を入力する THEN システムは既存のカテゴリから選択を求める SHALL
3. WHEN ユーザーがカテゴリを削除しようとする AND そのカテゴリに取引が紐づいている THEN システムは警告を表示し削除を防ぐ SHALL
4. IF デフォルトカテゴリが存在しない THEN システムは基本的なカテゴリ（食費、交通費、光熱費など）を自動作成する SHALL

### 要件 3

**ユーザーストーリー:** ユーザーとして、過去の取引を検索・編集したいので、間違いを修正し特定の取引を素早く見つけられるようになりたい

#### 受入基準

1. WHEN ユーザーが取引一覧を表示する THEN システムは日付順（新しい順）で取引を表示する SHALL
2. WHEN ユーザーが日付範囲で検索する THEN システムは指定期間内の取引のみを表示する SHALL
3. WHEN ユーザーがカテゴリで絞り込む THEN システムは選択されたカテゴリの取引のみを表示する SHALL
4. WHEN ユーザーが取引を編集する THEN システムは変更内容を保存し更新日時を記録する SHALL
5. WHEN ユーザーが取引を削除する THEN システムは確認ダイアログを表示してから削除を実行する SHALL

### 要件 4

**ユーザーストーリー:** ユーザーとして、月次・年次の財務レポートを確認したいので、収支の傾向を把握し将来の計画を立てられるようになりたい

#### 受入基準

1. WHEN ユーザーが月次レポートを表示する THEN システムは選択月の総収入、総支出、収支差額を表示する SHALL
2. WHEN ユーザーがカテゴリ別レポートを表示する THEN システムは各カテゴリの支出額と全体に占める割合を表示する SHALL
3. WHEN ユーザーが年次レポートを表示する THEN システムは月別の収支推移をグラフで表示する SHALL
4. IF 指定期間にデータが存在しない THEN システムは「データがありません」というメッセージを表示する SHALL

### 要件 5

**ユーザーストーリー:** ユーザーとして、データを安全に保存・バックアップしたいので、データの紛失を防ぎ複数デバイスで利用できるようになりたい

#### 受入基準

1. WHEN ユーザーがアプリを使用する THEN システムはデータをローカルストレージに自動保存する SHALL
2. WHEN ユーザーがデータをエクスポートする THEN システムはCSV形式でファイルを生成する SHALL
3. WHEN ユーザーがデータをインポートする THEN システムは既存データとの重複をチェックし警告を表示する SHALL
4. IF データの読み込みに失敗した THEN システムはエラーメッセージを表示し前回の正常な状態を維持する SHALL